<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>My Personal Portfolio</title>
  <meta name="description" content="A personal portfolio told through an interactive 3D globe. Spin the globe, explore my story." />
  <link rel="stylesheet" href="style.css" />

  <!-- Playfair Display for intro overlay -->
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700;900&display=swap" rel="stylesheet">

  <!-- Globe.gl via CDN -->
  <script src="https://unpkg.com/globe.gl"></script>


</head>
<body>

  <!-- ============================================================
       STAR BACKGROUND ‚Äî filled by JS in script.js
       ============================================================ -->
  <div id="stars-container" aria-hidden="true"></div>

  <!-- ============================================================
       INTRO OVERLAY ‚Äî text words + photos on top of globe
       Scrolls away as user scrolls down
       ============================================================ -->
  <div id="intro-overlay" aria-hidden="true">
    <span class="intro-word" style="left:5%; top:15%">hi</span>
    <span class="intro-word" style="left:18%; top:22%">i</span>
    <span class="intro-word" style="left:70%; top:13%">am</span>
    <span class="intro-word" style="left:79%; top:22%">avneet</span>
    <span class="intro-word" style="left:5%; top:68%">welcome</span>
    <span class="intro-word" style="left:27%; top:65%">to</span>
    <span class="intro-word" style="left:70%; top:68%">my</span>
    <span class="intro-word" style="left:82%; top:70%">world</span>

    <img class="intro-photo" src="assets/1.png" style="left:5%; top:35%; transform:rotate(-3deg)" alt="">
    <img class="intro-photo" src="assets/2.jpeg" style="left:16%; top:35%; transform:rotate(2deg)" alt="">
    <img class="intro-photo" src="assets/3.jpeg" style="left:72%; top:35%; transform:rotate(-2deg)" alt="">
    <img class="intro-photo" src="assets/4.jpeg" style="left:83%; top:35%; transform:rotate(3deg)" alt="">
  </div>

  <!-- ============================================================
       GLOBE SECTION ‚Äî full viewport.
       Hero text is overlaid on top of the globe; the globe
       canvas fills 100% of this container.
       ============================================================ -->
  <section id="globe-section" aria-label="Interactive 3D globe showing my journey">

    <!-- Globe renders here ‚Äî fills the full section -->
    <div id="globe-container"></div>

  </section>

  <!-- Scroll spacer ‚Äî gives room to scroll the intro overlay away -->
  <div id="intro-scroll-spacer"></div>

  <!-- ============================================================
       GLOBE TOOLTIP CARD
       Absolutely positioned, shown on pin hover.
       Content is populated by JavaScript.
       ============================================================ -->
  <div id="globe-tooltip" role="tooltip" aria-live="polite">
    <div class="tooltip-card">
      <span class="tooltip-emoji" id="tt-emoji"></span>
      <div class="tooltip-location" id="tt-location"></div>
      <div class="tooltip-year" id="tt-year"></div>
      <div class="tooltip-blurb" id="tt-blurb"></div>
      <a class="tooltip-btn" id="tt-link" href="#">Explore This Chapter ‚ù§Ô∏è</a>
    </div>
  </div>

  <!-- Main script ‚Äî globe, pins, tooltips, stars -->
  <script src="script.js"></script>

<div id="newsletter-float">
  <div class="nf-header">letters from avneet üíå</div>
  <p class="nf-sub">get updates on my upcoming sidequests</p>
  <iframe
    src="https://subscribe-forms.beehiiv.com/f81b2276-3730-4e1c-92ea-a74ae71c46eb"
    class="beehiiv-embed"
    frameborder="0"
    scrolling="no"
    style="width:100%;height:52px;margin:0;background:transparent;border:none;">
  </iframe>
</div>

  <!-- Intro overlay scroll-away logic -->
  <script>
  (function() {
    var overlay = document.getElementById('intro-overlay');
    var globeContainer = document.getElementById('globe-container');
    var newsletterBtn = document.getElementById('newsletter-float');

    // Prevent globe's OrbitControls from capturing wheel events
    // so the page can scroll. Re-enable after intro completes.
    function blockGlobeWheel(e) {
      e.stopPropagation();
    }
    globeContainer.addEventListener('wheel', blockGlobeWheel, true);

    window.addEventListener('scroll', function() {
      var scrollY = window.scrollY;
      console.log('scrollY:', scrollY);
      var progress = Math.min(scrollY / 500, 1);

      overlay.style.transform = 'translateY(' + (-scrollY * 1.5) + 'px)';
      overlay.style.opacity = 1 - progress;

      if (progress >= 1) {
        overlay.style.visibility = 'hidden';
        // Re-enable globe zoom after intro is done
        globeContainer.removeEventListener('wheel', blockGlobeWheel, true);
        newsletterBtn.classList.add('visible');
      } else {
        overlay.style.visibility = 'visible';
        newsletterBtn.classList.remove('visible');
      }
    });
  })();
  </script>

<script>
(function() {
  const clickSound = new Audio('assets/applepay.mp3');
  clickSound.preload = 'auto';

  document.addEventListener('click', function(e) {
    // Skip for "Explore This Chapter" link ‚Äî it has its own sound
    if (e.target.closest('#tt-link')) return;
    clickSound.currentTime = 0;
    clickSound.play();
  });
})();
</script>

</body>
</html>
